<%= erb :menu, locals: { pageid: 'addresses' } %>

<% content_for :javascript do %>
  <script src="/javascripts/address.js" type="text/javascript"></script>
<% end %>

<% if form.failed_on? :eastings %>
  <% content_for :form_errors do %>
    <p class="message">&bull; Easting is required and must be a number</p>
  <% end %>
<% end %>

<% if form.failed_on? :northings %>
  <% content_for :form_errors do %>
    <p class="message">&bull; Northing is required and must be a number</p>
  <% end %>
<% end %>

<% if form.failed_on? :estabtype %>
  <% content_for :form_errors do %>
    <p class="message">&bull; Establishment type is required for communal establishments and must be a number</p>
  <% end %>
<% end %>

<% if form.failed_on? :address_line2 %>
  <% content_for :form_errors do %>
    <p class="message">&bull; Address Line 2 is required</p>
  <% end %>
<% end %>

<% if form.failed_on? :postcode %>
  <% content_for :form_errors do %>
    <p class="message">&bull; Postcode is required</p>
  <% end %>
<% end %>

<% if form.failed_on? :hardtocount %>
  <% content_for :form_errors do %>
    <p class="message">&bull; Hardtocount is required</p>
  <% end %>
<% end %>

<form action="<%= action %>" method="post">
<% if method.present? %>
  <input type="hidden" name="_method" value="<%= method %>">
<% end %>
<% if params[:page].present? %>
  <input type="hidden" name="page" value="<%=h params[:page] %>">
<% end %>

<%# Hidden fields used to hold values to be sent to frameservice, but not edited, could be displayed in the furture below for editing of course %>
<% if lsoa11cd.present? %>
  <input type="hidden" name="lsoa11cd" value="<%= lsoa11cd %>">
<% end %><% if oa11cd.present? %>
  <input type="hidden" name="oa11cd" value="<%= oa11cd %>">
<% end %>

<%= erb :addressform_partial, locals: { addresstype: addresstype, eastings: eastings, northings: northings, address_line1: address_line1, address_line2: address_line2,
                                        estabtype: estabtype, hardtocount: hardtocount, town_name: town_name,  postcode: postcode } %>
  <p id="requiredfields"><span class="required">*</span> Required fields</p>
  <p class="buttons">
    <input class="button" type="submit" value="Save"> or <% if params[:page].present? %><a href="/addresses?page=<%=h params[:page] %>"><% else %><a href="/addresses"><% end %>Cancel</a>
  </p>
</form>

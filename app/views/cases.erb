<% content_for :menu do %>
  <li id="active"><a href="/">Home</a></li>
  <% unless authorised?("collect-csos") %>
  <li><a href="/regions">Addresses</a></li>
  <% end %>
  <% if authorised?("collect-admins") %>
    <li><a href="/manage">Manage</a></li>
  <% end %>
<% end %>

<% content_for :breadcrumbs do %>
  <a href="/regions">Regions</a> &gt; <a href="/regions/<%=h region_code %>/las">Region <%=h region_code %></a> &gt; <a href="/regions/<%=h region_code %>/las/<%=h local_authority_code %>/msoas">LA <%=h local_authority_code %></a> &gt; <a href="/regions/<%=h region_code %>/las/<%=h local_authority_code %>/msoas/<%=h msoa_code %>/addresses">MSOA <%=h msoa_code %></a> &gt; Address <%=h uprn_code %>
<% end %>

<% content_for :sub_heading do %>
  Click a case to create or view questionnaires.
<% end %>

<% content_for :sidebar do %>
  <%= erb :googlemaps_partial, locals: { coordinates: coordinates } %>
<% end %>

  <table class="address" style="margin-top: 0px;">
    <thead>
      <tr>
        <th>UPRN</th>
        <th>Address Type</th>
        <th>Easting</th>
        <th>Northing</th>
        <th>Address Line 1</th>
      </tr>
    </thead>
    <%= erb :address_partial, locals: { address: address } %>
    <%= erb :addresslines_partial, locals: { address: address } %>
  </table>

<% content_for :footer do %>
  <h3>Cases</h3>

  <% if cases.any? %>
    <%= will_paginate cases, :class => 'questionnairepagination', :previous_label => '&lt; Prev', :next_label => 'Next &gt;' %>
    <table class="questionnaire">
      <thead>
        <tr>
          <th>Case ID</th>
          <th>Case Status</th>
          <th>Case Type</th>
          <th>Case Created</th>
          <th>Sample ID</th>
          <th>Question Set</th>
        </tr>
      </thead>
      <tbody>
      <% cases.each_with_index do |uniqueCase, i| %>
        <tr class="<%= i.even? ? 'even' : 'odd ' %>">
          <td><a href="/regions/<%=h region_code %>/las/<%=h local_authority_code %>/msoas/<%=h msoa_code %>/addresses/<%=h uprn_code %>/case/<%=h uniqueCase['caseId'] %>"><%=h uniqueCase['caseId'] %></a></td>
        <% if uniqueCase['caseStatus'].present? %>
          <td><%=h uniqueCase['caseStatus'] %></td>
          <% else %>
            <td>-</td>
          <% end %>
        <% if uniqueCase['caseTypeId'].present? %>
          <td><%=h uniqueCase['caseTypeId'] %></td>
        <% else %>
          <td>-</td>
        <% end %>
        <% if uniqueCase['createdDatetime'].present? %>
          <td><%=h uniqueCase['createdDatetime'] %></td>
        <% else %>
          <td>-</td>
        <% end %>
        <% if uniqueCase['sampleId'].present? %>
          <td><%=h uniqueCase['sampleId']  %></td>
        <% else %>
          <td>-</td>
        <% end %>
        <% if uniqueCase['questionSet'].present? %>
          <td><%=h uniqueCase['questionSet'] %></td>
        <% else %>
          <td>-</td>
        <% end %>
        </tr>
      <% end %>
        </tbody>
      </table>
      <%= will_paginate cases, :previous_label => '&lt; Prev', :next_label => 'Next &gt;' %>
  <% else %>
    <p id="information"><strong>There are no cases for this address.</strong></p>
  <% end %>
<% end %>
